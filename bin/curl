#!/bin/bash
set -eo pipefail

cookies=$(mktemp /tmp/olmo-cookies.XXXXXX)
trap "rm $cookies" EXIT

email="${EMAIL:-murphy@allenai.org}"

curl \
  -s \
  -o /dev/null \
  -c "$cookies" \
  -H "Content-Type: application/json" \
  -H "X-Auth-Request-Email: $email" \
  "http://localhost:8000/v3/login/skiff"

curl \
  -b "$cookies" \
  -H "Content-Type: application/json" \
  "$@"

